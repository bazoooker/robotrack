!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):t.anime=i()}(this,function(){"use strict";var $={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},I={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},e=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective"],u={CSS:{},springs:{}};function C(t,i,e){return Math.min(Math.max(t,i),e)}function a(t,i){return-1<t.indexOf(i)}function n(t,i){return t.apply(null,i)}var F={arr:function(t){return Array.isArray(t)},obj:function(t){return a(Object.prototype.toString.call(t),"Object")},pth:function(t){return F.obj(t)&&t.hasOwnProperty("totalLength")},svg:function(t){return t instanceof SVGElement},inp:function(t){return t instanceof HTMLInputElement},dom:function(t){return t.nodeType||F.svg(t)},str:function(t){return"string"==typeof t},fnc:function(t){return"function"==typeof t},und:function(t){return void 0===t},hex:function(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)},rgb:function(t){return/^rgb/.test(t)},hsl:function(t){return/^hsl/.test(t)},col:function(t){return F.hex(t)||F.rgb(t)||F.hsl(t)},key:function(t){return!$.hasOwnProperty(t)&&!I.hasOwnProperty(t)&&"targets"!==t&&"keyframes"!==t}};function p(t){var i=/\(([^)]+)\)/.exec(t);return i?i[1].split(",").map(function(t){return parseFloat(t)}):[]}function r(o,e){var t=p(o),i=C(F.und(t[0])?1:t[0],.1,100),s=C(F.und(t[1])?100:t[1],.1,100),n=C(F.und(t[2])?10:t[2],.1,100),r=C(F.und(t[3])?0:t[3],.1,100),a=Math.sqrt(s/i),h=n/(2*Math.sqrt(s*i)),c=h<1?a*Math.sqrt(1-h*h):0,l=h<1?(h*a-r)/c:-r+a;function d(t){var i=e?e*t/1e3:t;return i=h<1?Math.exp(-i*h*a)*(1*Math.cos(c*i)+l*Math.sin(c*i)):(1+l*i)*Math.exp(-i*a),0===t||1===t?t:1-i}return e?d:function(){var t=u.springs[o];if(t)return t;for(var i=0,e=0;;)if(1===d(i+=1/6)){if(16<=++e)break}else e=0;var s=i*(1/6)*1e3;return u.springs[o]=s}}function h(i){return void 0===i&&(i=10),function(t){return Math.round(t*i)*(1/i)}}var i,o,c=function(n,i,r,e){if(0<=n&&n<=1&&0<=r&&r<=1){var a=new Float32Array(11);if(n!==i||r!==e)for(var t=0;t<11;++t)a[t]=_(.1*t,n,r);return function(t){return n===i&&r===e?t:0===t||1===t?t:_(function(t){for(var i=0,e=1;10!==e&&a[e]<=t;++e)i+=.1;var s=i+(t-a[--e])/(a[e+1]-a[e])*.1,o=m(s,n,r);return.001<=o?function(t,i,e,s){for(var o=0;o<4;++o){var n=m(i,e,s);if(0===n)return i;i-=(_(i,e,s)-t)/n}return i}(t,s,n,r):0===o?s:function(t,i,e,s,o){for(var n,r,a=0;0<(n=_(r=i+(e-i)/2,s,o)-t)?e=r:i=r,1e-7<Math.abs(n)&&++a<10;);return r}(t,i,i+.1,n,r)}(t),i,e)}}},l=(i={linear:function(){return function(t){return t}}},o={Sine:function(){return function(t){return 1-Math.cos(t*Math.PI/2)}},Circ:function(){return function(t){return 1-Math.sqrt(1-t*t)}},Back:function(){return function(t){return t*t*(3*t-2)}},Bounce:function(){return function(t){for(var i,e=4;t<((i=Math.pow(2,--e))-1)/11;);return 1/Math.pow(4,3-e)-7.5625*Math.pow((3*i-2)/22-t,2)}},Elastic:function(t,i){void 0===t&&(t=1),void 0===i&&(i=.5);var e=C(t,1,10),s=C(i,.1,2);return function(t){return 0===t||1===t?t:-e*Math.pow(2,10*(t-1))*Math.sin((t-1-s/(2*Math.PI)*Math.asin(1/e))*(2*Math.PI)/s)}}},["Quad","Cubic","Quart","Quint","Expo"].forEach(function(t,i){o[t]=function(){return function(t){return Math.pow(t,i+2)}}}),Object.keys(o).forEach(function(t){var s=o[t];i["easeIn"+t]=s,i["easeOut"+t]=function(i,e){return function(t){return 1-s(i,e)(1-t)}},i["easeInOut"+t]=function(i,e){return function(t){return t<.5?s(i,e)(2*t)/2:1-s(i,e)(-2*t+2)/2}}}),i);function s(t,i){return 1-3*i+3*t}function d(t,i){return 3*i-6*t}function f(t){return 3*t}function _(t,i,e){return((s(i,e)*t+d(i,e))*t+f(i))*t}function m(t,i,e){return 3*s(i,e)*t*t+2*d(i,e)*t+f(i)}function k(t,i){if(F.fnc(t))return t;var e=t.split("(")[0],s=l[e],o=p(t);switch(e){case"spring":return r(t,i);case"cubicBezier":return n(c,o);case"steps":return n(h,o);default:return n(s,o)}}function g(t){try{return document.querySelectorAll(t)}catch(t){return}}function M(t,i){for(var e=t.length,s=2<=arguments.length?i:void 0,o=[],n=0;n<e;n++)if(n in t){var r=t[n];i.call(s,r,n,t)&&o.push(r)}return o}function T(t){return t.reduce(function(t,i){return t.concat(F.arr(i)?T(i):i)},[])}function v(t){return F.arr(t)?t:(F.str(t)&&(t=g(t)||t),t instanceof NodeList||t instanceof HTMLCollection?[].slice.call(t):[t])}function b(t,i){return t.some(function(t){return t===i})}function y(t){var i={};for(var e in t)i[e]=t[e];return i}function D(t,i){var e=y(t);for(var s in t)e[s]=i.hasOwnProperty(s)?i[s]:t[s];return e}function P(t,i){var e=y(t);for(var s in i)e[s]=F.und(t[s])?i[s]:t[s];return e}function A(t){var i=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(t);if(i)return i[1]}function x(t,i){return F.fnc(t)?t(i.target,i.id,i.total):t}function w(t,i){return t.getAttribute(i)}function S(t,i,e){if(b([e,"deg","rad","turn"],A(i)))return i;var s=u.CSS[i+e];if(!F.und(s))return s;var o=document.createElement(t.tagName),n=t.parentNode&&t.parentNode!==document?t.parentNode:document.body;n.appendChild(o),o.style.position="absolute",o.style.width=100+e;var r=100/o.offsetWidth;n.removeChild(o);var a=r*parseFloat(i);return u.CSS[i+e]=a}function N(t,i,e){if(i in t.style){var s=i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),o=t.style[i]||getComputedStyle(t).getPropertyValue(s)||"0";return e?S(t,o,e):o}}function O(t,i){return F.dom(t)&&!F.inp(t)&&(w(t,i)||F.svg(t)&&t[i])?"attribute":F.dom(t)&&b(e,i)?"transform":F.dom(t)&&"transform"!==i&&N(t,i)?"css":null!=t[i]?"object":void 0}function E(t){if(F.dom(t)){for(var i,e=t.style.transform||"",s=/(\w+)\(([^)]*)\)/g,o=new Map;i=s.exec(e);)o.set(i[1],i[2]);return o}}function L(t,i,e,s){switch(O(t,i)){case"transform":return function(t,i,e,s){var o,n=a(i,"scale")?1:0+(a(o=i,"translate")||"perspective"===o?"px":a(o,"rotate")||a(o,"skew")?"deg":void 0),r=E(t).get(i)||n;return e&&(e.transforms.list.set(i,r),e.transforms.last=i),s?S(t,r,s):r}(t,i,s,e);case"css":return N(t,i,e);case"attribute":return w(t,i);default:return t[i]||0}}function j(t,i){var e=/^(\*=|\+=|-=)/.exec(t);if(!e)return t;var s=A(t)||0,o=parseFloat(i),n=parseFloat(t.replace(e[0],""));switch(e[0][0]){case"+":return o+n+s;case"-":return o-n+s;case"*":return o*n+s}}function B(t,i){if(F.col(t))return function(t){return F.rgb(t)?(e=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(i=t))?"rgba("+e[1]+",1)":i:F.hex(t)?(s=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,i,e,s){return i+i+e+e+s+s}),o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(s),"rgba("+parseInt(o[1],16)+","+parseInt(o[2],16)+","+parseInt(o[3],16)+",1)"):F.hsl(t)?function(t){var i,e,s,o=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(t),n=parseInt(o[1],10)/360,r=parseInt(o[2],10)/100,a=parseInt(o[3],10)/100,h=o[4]||1;function c(t,i,e){return e<0&&(e+=1),1<e&&(e-=1),e<1/6?t+6*(i-t)*e:e<.5?i:e<2/3?t+(i-t)*(2/3-e)*6:t}if(0==r)i=e=s=a;else{var l=a<.5?a*(1+r):a+r-a*r,d=2*a-l;i=c(d,l,n+1/3),e=c(d,l,n),s=c(d,l,n-1/3)}return"rgba("+255*i+","+255*e+","+255*s+","+h+")"}(t):void 0;var i,e,s,o}(t);if(/\s/g.test(t))return t;var e=A(t),s=e?t.substr(0,t.length-e.length):t;return i?s+i:s}function W(t,i){return Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2))}function R(t){for(var i,e=t.points,s=0,o=0;o<e.numberOfItems;o++){var n=e.getItem(o);0<o&&(s+=W(i,n)),i=n}return s}function q(t){if(t.getTotalLength)return t.getTotalLength();switch(t.tagName.toLowerCase()){case"circle":return n=t,2*Math.PI*w(n,"r");case"rect":return 2*w(o=t,"width")+2*w(o,"height");case"line":return W({x:w(s=t,"x1"),y:w(s,"y1")},{x:w(s,"x2"),y:w(s,"y2")});case"polyline":return R(t);case"polygon":return e=(i=t).points,R(i)+W(e.getItem(e.numberOfItems-1),e.getItem(0))}var i,e,s,o,n}function z(i,t){var e=t||{},s=e.el||function(){for(var t=i.parentNode;F.svg(t)&&F.svg(t.parentNode);)t=t.parentNode;return t}(),o=s.getBoundingClientRect(),n=w(s,"viewBox"),r=o.width,a=o.height,h=e.viewBox||(n?n.split(" "):[0,0,r,a]);return{el:s,viewBox:h,x:h[0]/1,y:h[1]/1,w:r/h[2],h:a/h[3]}}function H(e,s){function t(t){void 0===t&&(t=0);var i=1<=s+t?s+t:0;return e.el.getPointAtLength(i)}var i=z(e.el,e.svg),o=t(),n=t(-1),r=t(1);switch(e.property){case"x":return(o.x-i.x)*i.w;case"y":return(o.y-i.y)*i.h;case"angle":return 180*Math.atan2(r.y-n.y,r.x-n.x)/Math.PI}}function V(t,i){var e=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,s=B(F.pth(t)?t.totalLength:t,i)+"";return{original:s,numbers:s.match(e)?s.match(e).map(Number):[0],strings:F.str(t)||i?s.split(e):[]}}function G(t){return M(t?T(F.arr(t)?t.map(v):v(t)):[],function(t,i,e){return e.indexOf(t)===i})}function K(t){var e=G(t);return e.map(function(t,i){return{target:t,id:i,total:e.length,transforms:{list:E(t)}}})}function X(t,s){var i=y(s);if(/^spring/.test(i.easing)&&(i.duration=r(i.easing)),F.arr(t)){var e=t.length;2!==e||F.obj(t[0])?F.fnc(s.duration)||(i.duration=s.duration/e):t={value:t}}var o=F.arr(t)?t:[t];return o.map(function(t,i){var e=F.obj(t)&&!F.pth(t)?t:{value:t};return F.und(e.delay)&&(e.delay=i?0:s.delay),F.und(e.endDelay)&&(e.endDelay=i===o.length-1?s.endDelay:0),e}).map(function(t){return P(t,i)})}var U={css:function(t,i,e){return t.style[i]=e},attribute:function(t,i,e){return t.setAttribute(i,e)},object:function(t,i,e){return t[i]=e},transform:function(t,i,e,s,o){if(s.list.set(i,e),i===s.last||o){var n="";s.list.forEach(function(t,i){n+=i+"("+t+") "}),t.style.transform=n}}};function Q(t,h){K(t).forEach(function(t){for(var i in h){var e=x(h[i],t),s=t.target,o=A(e),n=L(s,i,o,t),r=j(B(e,o||A(n)),n),a=O(s,i);U[a](s,i,r,t.transforms,!0)}})}function Z(t,e){return M(T(t.map(function(i){return e.map(function(t){return function(t,i){var e=O(t.target,i.name);if(e){var s=function(l,d){var u;return l.tweens.map(function(t){var i=function(t,i){var e={};for(var s in t){var o=x(t[s],i);F.arr(o)&&1===(o=o.map(function(t){return x(t,i)})).length&&(o=o[0]),e[s]=o}return e.duration=parseFloat(e.duration),e.delay=parseFloat(e.delay),e}(t,d),e=i.value,s=F.arr(e)?e[1]:e,o=A(s),n=L(d.target,l.name,o,d),r=u?u.to.original:n,a=F.arr(e)?e[0]:r,h=A(a)||A(n),c=o||h;return F.und(s)&&(s=r),i.from=V(a,c),i.to=V(j(s,a),c),i.start=u?u.end:0,i.end=i.start+i.delay+i.duration+i.endDelay,i.easing=k(i.easing,i.duration),i.isPath=F.pth(e),i.isColor=F.col(i.from.original),i.isColor&&(i.round=1),u=i})}(i,t),o=s[s.length-1];return{type:e,property:i.name,animatable:t,tweens:s,duration:o.end,delay:s[0].delay,endDelay:o.endDelay}}}(i,t)})})),function(t){return!F.und(t)})}function Y(t,i){function e(t){return t.timelineOffset?t.timelineOffset:0}var s=t.length,o={};return o.duration=s?Math.max.apply(Math,t.map(function(t){return e(t)+t.duration})):i.duration,o.delay=s?Math.min.apply(Math,t.map(function(t){return e(t)+t.delay})):i.delay,o.endDelay=s?o.duration-Math.max.apply(Math,t.map(function(t){return e(t)+t.duration-t.endDelay})):i.endDelay,o}var J,tt=0,it=[],t=[],et=st;function st(){J=requestAnimationFrame(ot)}function ot(t){var i=it.length;if(i){for(var e=0;e<i;){var s=it[e];if(s.paused){var o=it.indexOf(s);-1<o&&(it.splice(o,1),i=it.length)}else s.tick(t);e++}st()}else J=cancelAnimationFrame(J)}function nt(t){void 0===t&&(t={});var n,r=0,a=0,h=0,c=0,l=null;function d(t){var i=window.Promise&&new Promise(function(t){return l=t});return t.finished=i}var i,e,s,o,u,p,f,_,k=(e=D($,i=t),o=function(t,i){var e=[],s=i.keyframes;for(var o in s&&(i=P(function(i){for(var e=M(T(i.map(function(t){return Object.keys(t)})),function(t){return F.key(t)}).reduce(function(t,i){return t.indexOf(i)<0&&t.push(i),t},[]),o={},t=function(t){var s=e[t];o[s]=i.map(function(t){var i={};for(var e in t)F.key(e)?e==s&&(i.value=t[e]):i[e]=t[e];return i})},s=0;s<e.length;s++)t(s);return o}(s),i)),i)F.key(o)&&e.push({name:o,tweens:X(i[o],t)});return e}(s=D(I,i),i),f=Y(p=Z(u=K(i.targets),o),s),_=tt,tt++,P(e,{id:_,children:[],animatables:u,animations:p,duration:f.duration,delay:f.delay,endDelay:f.endDelay}));function m(){var t=k.direction;"alternate"!==t&&(k.direction="normal"!==t?"normal":"reverse"),k.reversed=!k.reversed,n.forEach(function(t){return t.reversed=k.reversed})}function g(t){return k.reversed?k.duration-t:t}function v(){r=0,a=g(k.currentTime)*(1/nt.speed)}function b(t,i){i&&i.seek(t-i.timelineOffset)}function y(i){for(var t=0,e=k.animations,s=e.length;t<s;){var o=e[t],n=o.animatable,r=o.tweens,a=r.length-1,h=r[a];a&&(h=M(r,function(t){return i<t.end})[0]||h);for(var c=C(i-h.start-h.delay,0,h.duration)/h.duration,l=isNaN(c)?1:h.easing(c),d=h.to.strings,u=h.round,p=[],f=h.to.numbers.length,_=void 0,m=0;m<f;m++){var g=void 0,v=h.to.numbers[m],b=h.from.numbers[m]||0;g=h.isPath?H(h.value,l*v):b+l*(v-b),u&&(h.isColor&&2<m||(g=Math.round(g*u)/u)),p.push(g)}var y=d.length;if(y){_=d[0];for(var x=0;x<y;x++){d[x];var w=d[x+1],$=p[x];isNaN($)||(_+=w?$+w:$+" ")}}else _=p[0];U[o.type](n.target,o.property,_,n.transforms),o.currentValue=_,t++}}function x(t){k[t]&&!k.passThrough&&k[t](k)}function w(t){var i=k.duration,e=k.delay,s=i-k.endDelay,o=g(t);k.progress=C(o/i*100,0,100),k.reversePlayback=o<k.currentTime,n&&function(t){if(k.reversePlayback)for(var i=c;i--;)b(t,n[i]);else for(var e=0;e<c;e++)b(t,n[e])}(o),!k.began&&0<k.currentTime&&(k.began=!0,x("begin")),!k.loopBegan&&0<k.currentTime&&(k.loopBegan=!0,x("loopBegin")),o<=e&&0!==k.currentTime&&y(0),(s<=o&&k.currentTime!==i||!i)&&y(i),e<o&&o<s?(k.changeBegan||(k.changeBegan=!0,k.changeCompleted=!1,x("changeBegin")),x("change"),y(o)):k.changeBegan&&(k.changeCompleted=!0,k.changeBegan=!1,x("changeComplete")),k.currentTime=C(o,0,i),k.began&&x("update"),i<=t&&(a=0,k.remaining&&!0!==k.remaining&&k.remaining--,k.remaining?(r=h,x("loopComplete"),k.loopBegan=!1,"alternate"===k.direction&&m()):(k.paused=!0,k.completed||(k.completed=!0,x("loopComplete"),x("complete"),!k.passThrough&&"Promise"in window&&(l(),d(k)))))}return d(k),k.reset=function(){var t=k.direction;k.passThrough=!1,k.currentTime=0,k.progress=0,k.paused=!0,k.began=!1,k.loopBegan=!1,k.changeBegan=!1,k.completed=!1,k.changeCompleted=!1,k.reversePlayback=!1,k.reversed="reverse"===t,k.remaining=k.loop,n=k.children;for(var i=c=n.length;i--;)k.children[i].reset();(k.reversed&&!0!==k.loop||"alternate"===t&&1===k.loop)&&k.remaining++,y(k.reversed?k.duration:0)},k.set=function(t,i){return Q(t,i),k},k.tick=function(t){w(((h=t)+(a-(r=r||h)))*nt.speed)},k.seek=function(t){w(g(t))},k.pause=function(){k.paused=!0,v()},k.play=function(){k.paused&&(k.completed&&k.reset(),k.paused=!1,it.push(k),v(),J||et())},k.reverse=function(){m(),v()},k.restart=function(){k.reset(),k.play()},k.reset(),k.autoplay&&k.play(),k}function rt(t,i){for(var e=i.length;e--;)b(t,i[e].animatable.target)&&i.splice(e,1)}return"undefined"!=typeof document&&document.addEventListener("visibilitychange",function(){document.hidden?(it.forEach(function(t){return t.pause()}),t=it.slice(0),nt.running=it=[]):t.forEach(function(t){return t.play()})}),nt.version="3.1.0",nt.speed=1,nt.running=it,nt.remove=function(t){for(var i=G(t),e=it.length;e--;){var s=it[e],o=s.animations,n=s.children;rt(i,o);for(var r=n.length;r--;){var a=n[r],h=a.animations;rt(i,h),h.length||a.children.length||n.splice(r,1)}o.length||n.length||s.pause()}},nt.get=L,nt.set=Q,nt.convertPx=S,nt.path=function(t,i){var e=F.str(t)?g(t)[0]:t,s=i||100;return function(t){return{property:t,el:e,svg:z(e),totalLength:q(e)*(s/100)}}},nt.setDashoffset=function(t){var i=q(t);return t.setAttribute("stroke-dasharray",i),i},nt.stagger=function(t,i){void 0===i&&(i={});var c=i.direction||"normal",l=i.easing?k(i.easing):null,d=i.grid,u=i.axis,p=i.from||0,f="first"===p,_="center"===p,m="last"===p,g=F.arr(t),v=g?parseFloat(t[0]):parseFloat(t),b=g?parseFloat(t[1]):0,y=A(g?t[1]:t)||0,x=i.start||0+(g?v:0),w=[],$=0;return function(t,i,e){if(f&&(p=0),_&&(p=(e-1)/2),m&&(p=e-1),!w.length){for(var s=0;s<e;s++){if(d){var o=_?(d[0]-1)/2:p%d[0],n=_?(d[1]-1)/2:Math.floor(p/d[0]),r=o-s%d[0],a=n-Math.floor(s/d[0]),h=Math.sqrt(r*r+a*a);"x"===u&&(h=-r),"y"===u&&(h=-a),w.push(h)}else w.push(Math.abs(p-s));$=Math.max.apply(Math,w)}l&&(w=w.map(function(t){return l(t/$)*$})),"reverse"===c&&(w=w.map(function(t){return u?t<0?-1*t:-t:Math.abs($-t)}))}return x+(g?(b-v)/$:v)*(Math.round(100*w[i])/100)+y}},nt.timeline=function(l){void 0===l&&(l={});var d=nt(l);return d.duration=0,d.add=function(t,i){var e=it.indexOf(d),s=d.children;function o(t){t.passThrough=!0}-1<e&&it.splice(e,1);for(var n=0;n<s.length;n++)o(s[n]);var r=P(t,D(I,l));r.targets=r.targets||l.targets;var a=d.duration;r.autoplay=!1,r.direction=d.direction,r.timelineOffset=F.und(i)?a:j(i,a),o(d),d.seek(r.timelineOffset);var h=nt(r);o(h),s.push(h);var c=Y(s,l);return d.delay=c.delay,d.endDelay=c.endDelay,d.duration=c.duration,d.seek(0),d.reset(),d.autoplay&&d.play(),d},d},nt.easing=k,nt.penner=l,nt.random=function(t,i){return Math.floor(Math.random()*(i-t+1))+t},nt}),function(i){!jQuery&&"function"==typeof define&&define.amd?define(["jquery"],function(t){return i(t,document,window,navigator)}):jQuery||"object"!=typeof exports?i(jQuery,document,window,navigator):i(require("jquery"),document,window,navigator)}(function(h,c,l,t,d){"use strict";var i,e,s=0,o=(i=t.userAgent,e=/msie\s\d+/i,0<i.search(e)&&e.exec(i).toString().split(" ")[1]<9&&(h("html").addClass("lt-ie9"),!0));Function.prototype.bind||(Function.prototype.bind=function(s){var o=this,n=[].slice;if("function"!=typeof o)throw new TypeError;var r=n.call(arguments,1),a=function(){if(this instanceof a){var t=function(){};t.prototype=o.prototype;var i=new t,e=o.apply(i,r.concat(n.call(arguments)));return Object(e)===e?e:i}return o.apply(s,r.concat(n.call(arguments)))};return a}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,i){var e;if(null==this)throw new TypeError('"this" is null or not defined');var s=Object(this),o=s.length>>>0;if(0==o)return-1;var n=+i||0;if(Math.abs(n)===1/0&&(n=0),o<=n)return-1;for(e=Math.max(0<=n?n:o-Math.abs(n),0);e<o;){if(e in s&&s[e]===t)return e;e++}return-1});function n(t,i,e){this.VERSION="2.3.0",this.input=t,this.plugin_count=e,this.current_plugin=0,this.calc_count=0,this.update_tm=0,this.old_from=0,this.old_to=0,this.old_min_interval=null,this.raf_id=null,this.dragging=!1,this.force_redraw=!1,this.no_diapason=!1,this.has_tab_index=!0,this.is_key=!1,this.is_update=!1,this.is_start=!0,this.is_finish=!1,this.is_active=!1,this.is_resize=!1,this.is_click=!1,i=i||{},this.$cache={win:h(l),body:h(c.body),input:h(t),cont:null,rs:null,min:null,max:null,from:null,to:null,single:null,bar:null,line:null,s_single:null,s_from:null,s_to:null,shad_single:null,shad_from:null,shad_to:null,edge:null,grid:null,grid_labels:[]},this.coords={x_gap:0,x_pointer:0,w_rs:0,w_rs_old:0,w_handle:0,p_gap:0,p_gap_left:0,p_gap_right:0,p_step:0,p_pointer:0,p_handle:0,p_single_fake:0,p_single_real:0,p_from_fake:0,p_from_real:0,p_to_fake:0,p_to_real:0,p_bar_x:0,p_bar_w:0,grid_gap:0,big_num:0,big:[],big_w:[],big_p:[],big_x:[]},this.labels={w_min:0,w_max:0,w_from:0,w_to:0,w_single:0,p_min:0,p_max:0,p_from_fake:0,p_from_left:0,p_to_fake:0,p_to_left:0,p_single_fake:0,p_single_left:0};var s,o,n,r=this.$cache.input,a=r.prop("value");for(n in s={skin:"flat",type:"single",min:10,max:100,from:null,to:null,step:1,min_interval:0,max_interval:0,drag_interval:!1,values:[],p_values:[],from_fixed:!1,from_min:null,from_max:null,from_shadow:!1,to_fixed:!1,to_min:null,to_max:null,to_shadow:!1,prettify_enabled:!0,prettify_separator:" ",prettify:null,force_edges:!1,keyboard:!0,grid:!1,grid_margin:!0,grid_num:4,grid_snap:!1,hide_min_max:!1,hide_from_to:!1,prefix:"",postfix:"",max_postfix:"",decorate_both:!0,values_separator:" — ",input_values_separator:";",disable:!1,block:!1,extra_classes:"",scope:null,onStart:null,onChange:null,onFinish:null,onUpdate:null},"INPUT"!==r[0].nodeName&&console&&console.warn&&console.warn("Base element should be <input>!",r[0]),(o={skin:r.data("skin"),type:r.data("type"),min:r.data("min"),max:r.data("max"),from:r.data("from"),to:r.data("to"),step:r.data("step"),min_interval:r.data("minInterval"),max_interval:r.data("maxInterval"),drag_interval:r.data("dragInterval"),values:r.data("values"),from_fixed:r.data("fromFixed"),from_min:r.data("fromMin"),from_max:r.data("fromMax"),from_shadow:r.data("fromShadow"),to_fixed:r.data("toFixed"),to_min:r.data("toMin"),to_max:r.data("toMax"),to_shadow:r.data("toShadow"),prettify_enabled:r.data("prettifyEnabled"),prettify_separator:r.data("prettifySeparator"),force_edges:r.data("forceEdges"),keyboard:r.data("keyboard"),grid:r.data("grid"),grid_margin:r.data("gridMargin"),grid_num:r.data("gridNum"),grid_snap:r.data("gridSnap"),hide_min_max:r.data("hideMinMax"),hide_from_to:r.data("hideFromTo"),prefix:r.data("prefix"),postfix:r.data("postfix"),max_postfix:r.data("maxPostfix"),decorate_both:r.data("decorateBoth"),values_separator:r.data("valuesSeparator"),input_values_separator:r.data("inputValuesSeparator"),disable:r.data("disable"),block:r.data("block"),extra_classes:r.data("extraClasses")}).values=o.values&&o.values.split(","),o)o.hasOwnProperty(n)&&(o[n]!==d&&""!==o[n]||delete o[n]);a!==d&&""!==a&&((a=a.split(o.input_values_separator||i.input_values_separator||";"))[0]&&a[0]==+a[0]&&(a[0]=+a[0]),a[1]&&a[1]==+a[1]&&(a[1]=+a[1]),i&&i.values&&i.values.length?(s.from=a[0]&&i.values.indexOf(a[0]),s.to=a[1]&&i.values.indexOf(a[1])):(s.from=a[0]&&+a[0],s.to=a[1]&&+a[1])),h.extend(s,i),h.extend(s,o),this.options=s,this.update_check={},this.validate(),this.result={input:this.$cache.input,slider:null,min:this.options.min,max:this.options.max,from:this.options.from,from_percent:0,from_value:null,to:this.options.to,to_percent:0,to_value:null},this.init()}n.prototype={init:function(t){this.no_diapason=!1,this.coords.p_step=this.convertToPercent(this.options.step,!0),this.target="base",this.toggleInput(),this.append(),this.setMinMax(),t?(this.force_redraw=!0,this.calc(!0),this.callOnUpdate()):(this.force_redraw=!0,this.calc(!0),this.callOnStart()),this.updateScene()},append:function(){var t='<span class="irs irs--'+this.options.skin+" js-irs-"+this.plugin_count+" "+this.options.extra_classes+'"></span>';this.$cache.input.before(t),this.$cache.input.prop("readonly",!0),this.$cache.cont=this.$cache.input.prev(),this.result.slider=this.$cache.cont,this.$cache.cont.html('<span class="irs"><span class="irs-line" tabindex="0"></span><span class="irs-min">0</span><span class="irs-max">1</span><span class="irs-from">0</span><span class="irs-to">0</span><span class="irs-single">0</span></span><span class="irs-grid"></span>'),this.$cache.rs=this.$cache.cont.find(".irs"),this.$cache.min=this.$cache.cont.find(".irs-min"),this.$cache.max=this.$cache.cont.find(".irs-max"),this.$cache.from=this.$cache.cont.find(".irs-from"),this.$cache.to=this.$cache.cont.find(".irs-to"),this.$cache.single=this.$cache.cont.find(".irs-single"),this.$cache.line=this.$cache.cont.find(".irs-line"),this.$cache.grid=this.$cache.cont.find(".irs-grid"),"single"===this.options.type?(this.$cache.cont.append('<span class="irs-bar irs-bar--single"></span><span class="irs-shadow shadow-single"></span><span class="irs-handle single"><i></i><i></i><i></i></span>'),this.$cache.bar=this.$cache.cont.find(".irs-bar"),this.$cache.edge=this.$cache.cont.find(".irs-bar-edge"),this.$cache.s_single=this.$cache.cont.find(".single"),this.$cache.from[0].style.visibility="hidden",this.$cache.to[0].style.visibility="hidden",this.$cache.shad_single=this.$cache.cont.find(".shadow-single")):(this.$cache.cont.append('<span class="irs-bar"></span><span class="irs-shadow shadow-from"></span><span class="irs-shadow shadow-to"></span><span class="irs-handle from"><i></i><i></i><i></i></span><span class="irs-handle to"><i></i><i></i><i></i></span>'),this.$cache.bar=this.$cache.cont.find(".irs-bar"),this.$cache.s_from=this.$cache.cont.find(".from"),this.$cache.s_to=this.$cache.cont.find(".to"),this.$cache.shad_from=this.$cache.cont.find(".shadow-from"),this.$cache.shad_to=this.$cache.cont.find(".shadow-to"),this.setTopHandler()),this.options.hide_from_to&&(this.$cache.from[0].style.display="none",this.$cache.to[0].style.display="none",this.$cache.single[0].style.display="none"),this.appendGrid(),this.options.disable?(this.appendDisableMask(),this.$cache.input[0].disabled=!0):(this.$cache.input[0].disabled=!1,this.removeDisableMask(),this.bindEvents()),this.options.disable||(this.options.block?this.appendDisableMask():this.removeDisableMask()),this.options.drag_interval&&(this.$cache.bar[0].style.cursor="ew-resize")},setTopHandler:function(){var t=this.options.min,i=this.options.max,e=this.options.from,s=this.options.to;t<e&&s===i?this.$cache.s_from.addClass("type_last"):s<i&&this.$cache.s_to.addClass("type_last")},changeLevel:function(t){switch(t){case"single":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_single_fake),this.$cache.s_single.addClass("state_hover");break;case"from":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_from_fake),this.$cache.s_from.addClass("state_hover"),this.$cache.s_from.addClass("type_last"),this.$cache.s_to.removeClass("type_last");break;case"to":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_to_fake),this.$cache.s_to.addClass("state_hover"),this.$cache.s_to.addClass("type_last"),this.$cache.s_from.removeClass("type_last");break;case"both":this.coords.p_gap_left=this.toFixed(this.coords.p_pointer-this.coords.p_from_fake),this.coords.p_gap_right=this.toFixed(this.coords.p_to_fake-this.coords.p_pointer),this.$cache.s_to.removeClass("type_last"),this.$cache.s_from.removeClass("type_last")}},appendDisableMask:function(){this.$cache.cont.append('<span class="irs-disable-mask"></span>'),this.$cache.cont.addClass("irs-disabled")},removeDisableMask:function(){this.$cache.cont.remove(".irs-disable-mask"),this.$cache.cont.removeClass("irs-disabled")},remove:function(){this.$cache.cont.remove(),this.$cache.cont=null,this.$cache.line.off("keydown.irs_"+this.plugin_count),this.$cache.body.off("touchmove.irs_"+this.plugin_count),this.$cache.body.off("mousemove.irs_"+this.plugin_count),this.$cache.win.off("touchend.irs_"+this.plugin_count),this.$cache.win.off("mouseup.irs_"+this.plugin_count),o&&(this.$cache.body.off("mouseup.irs_"+this.plugin_count),this.$cache.body.off("mouseleave.irs_"+this.plugin_count)),this.$cache.grid_labels=[],this.coords.big=[],this.coords.big_w=[],this.coords.big_p=[],this.coords.big_x=[],cancelAnimationFrame(this.raf_id)},bindEvents:function(){this.no_diapason||(this.$cache.body.on("touchmove.irs_"+this.plugin_count,this.pointerMove.bind(this)),this.$cache.body.on("mousemove.irs_"+this.plugin_count,this.pointerMove.bind(this)),this.$cache.win.on("touchend.irs_"+this.plugin_count,this.pointerUp.bind(this)),this.$cache.win.on("mouseup.irs_"+this.plugin_count,this.pointerUp.bind(this)),this.$cache.line.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.line.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.line.on("focus.irs_"+this.plugin_count,this.pointerFocus.bind(this)),this.options.drag_interval&&"double"===this.options.type?(this.$cache.bar.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"both")),this.$cache.bar.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"both"))):(this.$cache.bar.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.bar.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"))),"single"===this.options.type?(this.$cache.single.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.s_single.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.shad_single.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.single.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.s_single.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.edge.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.shad_single.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"))):(this.$cache.single.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,null)),this.$cache.single.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,null)),this.$cache.from.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.s_from.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.to.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.s_to.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.shad_from.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.shad_to.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.from.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.s_from.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.to.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.s_to.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.shad_from.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.shad_to.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"))),this.options.keyboard&&this.$cache.line.on("keydown.irs_"+this.plugin_count,this.key.bind(this,"keyboard")),o&&(this.$cache.body.on("mouseup.irs_"+this.plugin_count,this.pointerUp.bind(this)),this.$cache.body.on("mouseleave.irs_"+this.plugin_count,this.pointerUp.bind(this))))},pointerFocus:function(t){var i,e;this.target||(i=(e="single"===this.options.type?this.$cache.single:this.$cache.from).offset().left,i+=e.width()/2-1,this.pointerClick("single",{preventDefault:function(){},pageX:i}))},pointerMove:function(t){if(this.dragging){var i=t.pageX||t.originalEvent.touches&&t.originalEvent.touches[0].pageX;this.coords.x_pointer=i-this.coords.x_gap,this.calc()}},pointerUp:function(t){this.current_plugin===this.plugin_count&&this.is_active&&(this.is_active=!1,this.$cache.cont.find(".state_hover").removeClass("state_hover"),this.force_redraw=!0,o&&h("*").prop("unselectable",!1),this.updateScene(),this.restoreOriginalMinInterval(),(h.contains(this.$cache.cont[0],t.target)||this.dragging)&&this.callOnFinish(),this.dragging=!1)},pointerDown:function(t,i){i.preventDefault();var e=i.pageX||i.originalEvent.touches&&i.originalEvent.touches[0].pageX;2!==i.button&&("both"===t&&this.setTempMinInterval(),t=t||(this.target||"from"),this.current_plugin=this.plugin_count,this.target=t,this.is_active=!0,this.dragging=!0,this.coords.x_gap=this.$cache.rs.offset().left,this.coords.x_pointer=e-this.coords.x_gap,this.calcPointerPercent(),this.changeLevel(t),o&&h("*").prop("unselectable",!0),this.$cache.line.trigger("focus"),this.updateScene())},pointerClick:function(t,i){i.preventDefault();var e=i.pageX||i.originalEvent.touches&&i.originalEvent.touches[0].pageX;2!==i.button&&(this.current_plugin=this.plugin_count,this.target=t,this.is_click=!0,this.coords.x_gap=this.$cache.rs.offset().left,this.coords.x_pointer=+(e-this.coords.x_gap).toFixed(),this.force_redraw=!0,this.calc(),this.$cache.line.trigger("focus"))},key:function(t,i){if(!(this.current_plugin!==this.plugin_count||i.altKey||i.ctrlKey||i.shiftKey||i.metaKey)){switch(i.which){case 83:case 65:case 40:case 37:i.preventDefault(),this.moveByKey(!1);break;case 87:case 68:case 38:case 39:i.preventDefault(),this.moveByKey(!0)}return!0}},moveByKey:function(t){var i=this.coords.p_pointer,e=(this.options.max-this.options.min)/100;e=this.options.step/e,t?i+=e:i-=e,this.coords.x_pointer=this.toFixed(this.coords.w_rs/100*i),this.is_key=!0,this.calc()},setMinMax:function(){if(this.options){if(this.options.hide_min_max)return this.$cache.min[0].style.display="none",void(this.$cache.max[0].style.display="none");if(this.options.values.length)this.$cache.min.html(this.decorate(this.options.p_values[this.options.min])),this.$cache.max.html(this.decorate(this.options.p_values[this.options.max]));else{var t=this._prettify(this.options.min),i=this._prettify(this.options.max);this.result.min_pretty=t,this.result.max_pretty=i,this.$cache.min.html(this.decorate(t,this.options.min)),this.$cache.max.html(this.decorate(i,this.options.max))}this.labels.w_min=this.$cache.min.outerWidth(!1),this.labels.w_max=this.$cache.max.outerWidth(!1)}},setTempMinInterval:function(){var t=this.result.to-this.result.from;null===this.old_min_interval&&(this.old_min_interval=this.options.min_interval),this.options.min_interval=t},restoreOriginalMinInterval:function(){null!==this.old_min_interval&&(this.options.min_interval=this.old_min_interval,this.old_min_interval=null)},calc:function(t){if(this.options&&(this.calc_count++,10!==this.calc_count&&!t||(this.calc_count=0,this.coords.w_rs=this.$cache.rs.outerWidth(!1),this.calcHandlePercent()),this.coords.w_rs)){this.calcPointerPercent();var i=this.getHandleX();switch("both"===this.target&&(this.coords.p_gap=0,i=this.getHandleX()),"click"===this.target&&(this.coords.p_gap=this.coords.p_handle/2,i=this.getHandleX(),this.options.drag_interval?this.target="both_one":this.target=this.chooseHandle(i)),this.target){case"base":var e=(this.options.max-this.options.min)/100,s=(this.result.from-this.options.min)/e,o=(this.result.to-this.options.min)/e;this.coords.p_single_real=this.toFixed(s),this.coords.p_from_real=this.toFixed(s),this.coords.p_to_real=this.toFixed(o),this.coords.p_single_real=this.checkDiapason(this.coords.p_single_real,this.options.from_min,this.options.from_max),this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max),this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max),this.coords.p_single_fake=this.convertToFakePercent(this.coords.p_single_real),this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real),this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real),this.target=null;break;case"single":if(this.options.from_fixed)break;this.coords.p_single_real=this.convertToRealPercent(i),this.coords.p_single_real=this.calcWithStep(this.coords.p_single_real),this.coords.p_single_real=this.checkDiapason(this.coords.p_single_real,this.options.from_min,this.options.from_max),this.coords.p_single_fake=this.convertToFakePercent(this.coords.p_single_real);break;case"from":if(this.options.from_fixed)break;this.coords.p_from_real=this.convertToRealPercent(i),this.coords.p_from_real=this.calcWithStep(this.coords.p_from_real),this.coords.p_from_real>this.coords.p_to_real&&(this.coords.p_from_real=this.coords.p_to_real),this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max),this.coords.p_from_real=this.checkMinInterval(this.coords.p_from_real,this.coords.p_to_real,"from"),this.coords.p_from_real=this.checkMaxInterval(this.coords.p_from_real,this.coords.p_to_real,"from"),this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real);break;case"to":if(this.options.to_fixed)break;this.coords.p_to_real=this.convertToRealPercent(i),this.coords.p_to_real=this.calcWithStep(this.coords.p_to_real),this.coords.p_to_real<this.coords.p_from_real&&(this.coords.p_to_real=this.coords.p_from_real),this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max),this.coords.p_to_real=this.checkMinInterval(this.coords.p_to_real,this.coords.p_from_real,"to"),this.coords.p_to_real=this.checkMaxInterval(this.coords.p_to_real,this.coords.p_from_real,"to"),this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real);break;case"both":if(this.options.from_fixed||this.options.to_fixed)break;i=this.toFixed(i+.001*this.coords.p_handle),this.coords.p_from_real=this.convertToRealPercent(i)-this.coords.p_gap_left,this.coords.p_from_real=this.calcWithStep(this.coords.p_from_real),this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max),this.coords.p_from_real=this.checkMinInterval(this.coords.p_from_real,this.coords.p_to_real,"from"),this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real),this.coords.p_to_real=this.convertToRealPercent(i)+this.coords.p_gap_right,this.coords.p_to_real=this.calcWithStep(this.coords.p_to_real),this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max),this.coords.p_to_real=this.checkMinInterval(this.coords.p_to_real,this.coords.p_from_real,"to"),this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real);break;case"both_one":if(this.options.from_fixed||this.options.to_fixed)break;var n=this.convertToRealPercent(i),r=this.result.from_percent,a=this.result.to_percent-r,h=a/2,c=n-h,l=n+h;c<0&&(l=(c=0)+a),100<l&&(c=(l=100)-a),this.coords.p_from_real=this.calcWithStep(c),this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max),this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real),this.coords.p_to_real=this.calcWithStep(l),this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max),this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real)}"single"===this.options.type?(this.coords.p_bar_x=this.coords.p_handle/2,this.coords.p_bar_w=this.coords.p_single_fake,this.result.from_percent=this.coords.p_single_real,this.result.from=this.convertToValue(this.coords.p_single_real),this.result.from_pretty=this._prettify(this.result.from),this.options.values.length&&(this.result.from_value=this.options.values[this.result.from])):(this.coords.p_bar_x=this.toFixed(this.coords.p_from_fake+this.coords.p_handle/2),this.coords.p_bar_w=this.toFixed(this.coords.p_to_fake-this.coords.p_from_fake),this.result.from_percent=this.coords.p_from_real,this.result.from=this.convertToValue(this.coords.p_from_real),this.result.from_pretty=this._prettify(this.result.from),this.result.to_percent=this.coords.p_to_real,this.result.to=this.convertToValue(this.coords.p_to_real),this.result.to_pretty=this._prettify(this.result.to),this.options.values.length&&(this.result.from_value=this.options.values[this.result.from],this.result.to_value=this.options.values[this.result.to])),this.calcMinMax(),this.calcLabels()}},calcPointerPercent:function(){this.coords.w_rs?(this.coords.x_pointer<0||isNaN(this.coords.x_pointer)?this.coords.x_pointer=0:this.coords.x_pointer>this.coords.w_rs&&(this.coords.x_pointer=this.coords.w_rs),this.coords.p_pointer=this.toFixed(this.coords.x_pointer/this.coords.w_rs*100)):this.coords.p_pointer=0},convertToRealPercent:function(t){return t/(100-this.coords.p_handle)*100},convertToFakePercent:function(t){return t/100*(100-this.coords.p_handle)},getHandleX:function(){var t=100-this.coords.p_handle,i=this.toFixed(this.coords.p_pointer-this.coords.p_gap);return i<0?i=0:t<i&&(i=t),i},calcHandlePercent:function(){"single"===this.options.type?this.coords.w_handle=this.$cache.s_single.outerWidth(!1):this.coords.w_handle=this.$cache.s_from.outerWidth(!1),this.coords.p_handle=this.toFixed(this.coords.w_handle/this.coords.w_rs*100)},chooseHandle:function(t){return"single"===this.options.type?"single":this.coords.p_from_real+(this.coords.p_to_real-this.coords.p_from_real)/2<=t?this.options.to_fixed?"from":"to":this.options.from_fixed?"to":"from"},calcMinMax:function(){this.coords.w_rs&&(this.labels.p_min=this.labels.w_min/this.coords.w_rs*100,this.labels.p_max=this.labels.w_max/this.coords.w_rs*100)},calcLabels:function(){this.coords.w_rs&&!this.options.hide_from_to&&("single"===this.options.type?(this.labels.w_single=this.$cache.single.outerWidth(!1),this.labels.p_single_fake=this.labels.w_single/this.coords.w_rs*100,this.labels.p_single_left=this.coords.p_single_fake+this.coords.p_handle/2-this.labels.p_single_fake/2):(this.labels.w_from=this.$cache.from.outerWidth(!1),this.labels.p_from_fake=this.labels.w_from/this.coords.w_rs*100,this.labels.p_from_left=this.coords.p_from_fake+this.coords.p_handle/2-this.labels.p_from_fake/2,this.labels.p_from_left=this.toFixed(this.labels.p_from_left),this.labels.p_from_left=this.checkEdges(this.labels.p_from_left,this.labels.p_from_fake),this.labels.w_to=this.$cache.to.outerWidth(!1),this.labels.p_to_fake=this.labels.w_to/this.coords.w_rs*100,this.labels.p_to_left=this.coords.p_to_fake+this.coords.p_handle/2-this.labels.p_to_fake/2,this.labels.p_to_left=this.toFixed(this.labels.p_to_left),this.labels.p_to_left=this.checkEdges(this.labels.p_to_left,this.labels.p_to_fake),this.labels.w_single=this.$cache.single.outerWidth(!1),this.labels.p_single_fake=this.labels.w_single/this.coords.w_rs*100,this.labels.p_single_left=(this.labels.p_from_left+this.labels.p_to_left+this.labels.p_to_fake)/2-this.labels.p_single_fake/2,this.labels.p_single_left=this.toFixed(this.labels.p_single_left)),this.labels.p_single_left=this.checkEdges(this.labels.p_single_left,this.labels.p_single_fake))},updateScene:function(){this.raf_id&&(cancelAnimationFrame(this.raf_id),this.raf_id=null),clearTimeout(this.update_tm),this.update_tm=null,this.options&&(this.drawHandles(),this.is_active?this.raf_id=requestAnimationFrame(this.updateScene.bind(this)):this.update_tm=setTimeout(this.updateScene.bind(this),300))},drawHandles:function(){this.coords.w_rs=this.$cache.rs.outerWidth(!1),this.coords.w_rs&&(this.coords.w_rs!==this.coords.w_rs_old&&(this.target="base",this.is_resize=!0),this.coords.w_rs===this.coords.w_rs_old&&!this.force_redraw||(this.setMinMax(),this.calc(!0),this.drawLabels(),this.options.grid&&(this.calcGridMargin(),this.calcGridLabels()),this.force_redraw=!0,this.coords.w_rs_old=this.coords.w_rs,this.drawShadow()),this.coords.w_rs&&(this.dragging||this.force_redraw||this.is_key)&&((this.old_from!==this.result.from||this.old_to!==this.result.to||this.force_redraw||this.is_key)&&(this.drawLabels(),this.$cache.bar[0].style.left=this.coords.p_bar_x+"%",this.$cache.bar[0].style.width=this.coords.p_bar_w+"%","single"===this.options.type?(this.$cache.bar[0].style.left=0,this.$cache.bar[0].style.width=this.coords.p_bar_w+this.coords.p_bar_x+"%",this.$cache.s_single[0].style.left=this.coords.p_single_fake+"%"):(this.$cache.s_from[0].style.left=this.coords.p_from_fake+"%",this.$cache.s_to[0].style.left=this.coords.p_to_fake+"%",this.old_from===this.result.from&&!this.force_redraw||(this.$cache.from[0].style.left=this.labels.p_from_left+"%"),this.old_to===this.result.to&&!this.force_redraw||(this.$cache.to[0].style.left=this.labels.p_to_left+"%")),this.$cache.single[0].style.left=this.labels.p_single_left+"%",this.writeToInput(),this.old_from===this.result.from&&this.old_to===this.result.to||this.is_start||(this.$cache.input.trigger("change"),this.$cache.input.trigger("input")),this.old_from=this.result.from,this.old_to=this.result.to,this.is_resize||this.is_update||this.is_start||this.is_finish||this.callOnChange(),(this.is_key||this.is_click)&&(this.is_key=!1,this.is_click=!1,this.callOnFinish()),this.is_update=!1,this.is_resize=!1,this.is_finish=!1),this.is_start=!1,this.is_key=!1,this.is_click=!1,this.force_redraw=!1))},drawLabels:function(){if(this.options){var t,i,e,s,o,n=this.options.values.length,r=this.options.p_values;if(!this.options.hide_from_to)if("single"===this.options.type)t=n?this.decorate(r[this.result.from]):(s=this._prettify(this.result.from),this.decorate(s,this.result.from)),this.$cache.single.html(t),this.calcLabels(),this.labels.p_single_left<this.labels.p_min+1?this.$cache.min[0].style.visibility="hidden":this.$cache.min[0].style.visibility="visible",this.labels.p_single_left+this.labels.p_single_fake>100-this.labels.p_max-1?this.$cache.max[0].style.visibility="hidden":this.$cache.max[0].style.visibility="visible";else{e=n?(this.options.decorate_both?(t=this.decorate(r[this.result.from]),t+=this.options.values_separator,t+=this.decorate(r[this.result.to])):t=this.decorate(r[this.result.from]+this.options.values_separator+r[this.result.to]),i=this.decorate(r[this.result.from]),this.decorate(r[this.result.to])):(s=this._prettify(this.result.from),o=this._prettify(this.result.to),this.options.decorate_both?(t=this.decorate(s,this.result.from),t+=this.options.values_separator,t+=this.decorate(o,this.result.to)):t=this.decorate(s+this.options.values_separator+o,this.result.to),i=this.decorate(s,this.result.from),this.decorate(o,this.result.to)),this.$cache.single.html(t),this.$cache.from.html(i),this.$cache.to.html(e),this.calcLabels();var a=Math.min(this.labels.p_single_left,this.labels.p_from_left),h=this.labels.p_single_left+this.labels.p_single_fake,c=this.labels.p_to_left+this.labels.p_to_fake,l=Math.max(h,c);this.labels.p_from_left+this.labels.p_from_fake>=this.labels.p_to_left?(this.$cache.from[0].style.visibility="hidden",this.$cache.to[0].style.visibility="hidden",this.$cache.single[0].style.visibility="visible",l=this.result.from===this.result.to?("from"===this.target?this.$cache.from[0].style.visibility="visible":"to"===this.target?this.$cache.to[0].style.visibility="visible":this.target||(this.$cache.from[0].style.visibility="visible"),this.$cache.single[0].style.visibility="hidden",c):(this.$cache.from[0].style.visibility="hidden",this.$cache.to[0].style.visibility="hidden",this.$cache.single[0].style.visibility="visible",Math.max(h,c))):(this.$cache.from[0].style.visibility="visible",this.$cache.to[0].style.visibility="visible",this.$cache.single[0].style.visibility="hidden"),a<this.labels.p_min+1?this.$cache.min[0].style.visibility="hidden":this.$cache.min[0].style.visibility="visible",l>100-this.labels.p_max-1?this.$cache.max[0].style.visibility="hidden":this.$cache.max[0].style.visibility="visible"}}},drawShadow:function(){var t,i,e,s,o=this.options,n=this.$cache,r="number"==typeof o.from_min&&!isNaN(o.from_min),a="number"==typeof o.from_max&&!isNaN(o.from_max),h="number"==typeof o.to_min&&!isNaN(o.to_min),c="number"==typeof o.to_max&&!isNaN(o.to_max);"single"===o.type?o.from_shadow&&(r||a)?(t=this.convertToPercent(r?o.from_min:o.min),i=this.convertToPercent(a?o.from_max:o.max)-t,t=this.toFixed(t-this.coords.p_handle/100*t),i=this.toFixed(i-this.coords.p_handle/100*i),t+=this.coords.p_handle/2,n.shad_single[0].style.display="block",n.shad_single[0].style.left=t+"%",n.shad_single[0].style.width=i+"%"):n.shad_single[0].style.display="none":(o.from_shadow&&(r||a)?(t=this.convertToPercent(r?o.from_min:o.min),i=this.convertToPercent(a?o.from_max:o.max)-t,t=this.toFixed(t-this.coords.p_handle/100*t),i=this.toFixed(i-this.coords.p_handle/100*i),t+=this.coords.p_handle/2,n.shad_from[0].style.display="block",n.shad_from[0].style.left=t+"%",n.shad_from[0].style.width=i+"%"):n.shad_from[0].style.display="none",o.to_shadow&&(h||c)?(e=this.convertToPercent(h?o.to_min:o.min),s=this.convertToPercent(c?o.to_max:o.max)-e,e=this.toFixed(e-this.coords.p_handle/100*e),s=this.toFixed(s-this.coords.p_handle/100*s),e+=this.coords.p_handle/2,n.shad_to[0].style.display="block",n.shad_to[0].style.left=e+"%",n.shad_to[0].style.width=s+"%"):n.shad_to[0].style.display="none")},writeToInput:function(){"single"===this.options.type?(this.options.values.length?this.$cache.input.prop("value",this.result.from_value):this.$cache.input.prop("value",this.result.from),this.$cache.input.data("from",this.result.from)):(this.options.values.length?this.$cache.input.prop("value",this.result.from_value+this.options.input_values_separator+this.result.to_value):this.$cache.input.prop("value",this.result.from+this.options.input_values_separator+this.result.to),this.$cache.input.data("from",this.result.from),this.$cache.input.data("to",this.result.to))},callOnStart:function(){this.writeToInput(),this.options.onStart&&"function"==typeof this.options.onStart&&(this.options.scope?this.options.onStart.call(this.options.scope,this.result):this.options.onStart(this.result))},callOnChange:function(){this.writeToInput(),this.options.onChange&&"function"==typeof this.options.onChange&&(this.options.scope?this.options.onChange.call(this.options.scope,this.result):this.options.onChange(this.result))},callOnFinish:function(){this.writeToInput(),this.options.onFinish&&"function"==typeof this.options.onFinish&&(this.options.scope?this.options.onFinish.call(this.options.scope,this.result):this.options.onFinish(this.result))},callOnUpdate:function(){this.writeToInput(),this.options.onUpdate&&"function"==typeof this.options.onUpdate&&(this.options.scope?this.options.onUpdate.call(this.options.scope,this.result):this.options.onUpdate(this.result))},toggleInput:function(){this.$cache.input.toggleClass("irs-hidden-input"),this.has_tab_index?this.$cache.input.prop("tabindex",-1):this.$cache.input.removeProp("tabindex"),this.has_tab_index=!this.has_tab_index},convertToPercent:function(t,i){var e,s=this.options.max-this.options.min,o=s/100;return s?(e=(i?t:t-this.options.min)/o,this.toFixed(e)):(this.no_diapason=!0,0)},convertToValue:function(t){var i,e,s=this.options.min,o=this.options.max,n=s.toString().split(".")[1],r=o.toString().split(".")[1],a=0,h=0;if(0===t)return this.options.min;if(100===t)return this.options.max;n&&(a=i=n.length),r&&(a=e=r.length),i&&e&&(a=e<=i?i:e),s<0&&(s=+(s+(h=Math.abs(s))).toFixed(a),o=+(o+h).toFixed(a));var c,l=(o-s)/100*t+s,d=this.options.step.toString().split(".")[1];return l=d?+l.toFixed(d.length):(l/=this.options.step,+(l*=this.options.step).toFixed(0)),h&&(l-=h),(c=d?+l.toFixed(d.length):this.toFixed(l))<this.options.min?c=this.options.min:c>this.options.max&&(c=this.options.max),c},calcWithStep:function(t){var i=Math.round(t/this.coords.p_step)*this.coords.p_step;return 100<i&&(i=100),100===t&&(i=100),this.toFixed(i)},checkMinInterval:function(t,i,e){var s,o,n=this.options;return n.min_interval?(s=this.convertToValue(t),o=this.convertToValue(i),"from"===e?o-s<n.min_interval&&(s=o-n.min_interval):s-o<n.min_interval&&(s=o+n.min_interval),this.convertToPercent(s)):t},checkMaxInterval:function(t,i,e){var s,o,n=this.options;return n.max_interval?(s=this.convertToValue(t),o=this.convertToValue(i),"from"===e?o-s>n.max_interval&&(s=o-n.max_interval):s-o>n.max_interval&&(s=o+n.max_interval),this.convertToPercent(s)):t},checkDiapason:function(t,i,e){var s=this.convertToValue(t),o=this.options;return"number"!=typeof i&&(i=o.min),"number"!=typeof e&&(e=o.max),s<i&&(s=i),e<s&&(s=e),this.convertToPercent(s)},toFixed:function(t){return+(t=t.toFixed(20))},_prettify:function(t){return this.options.prettify_enabled?this.options.prettify&&"function"==typeof this.options.prettify?this.options.prettify(t):this.prettify(t):t},prettify:function(t){return t.toString().replace(/(\d{1,3}(?=(?:\d\d\d)+(?!\d)))/g,"$1"+this.options.prettify_separator)},checkEdges:function(t,i){return this.options.force_edges&&(t<0?t=0:100-i<t&&(t=100-i)),this.toFixed(t)},validate:function(){var t,i,e=this.options,s=this.result,o=e.values,n=o.length;if("string"==typeof e.min&&(e.min=+e.min),"string"==typeof e.max&&(e.max=+e.max),"string"==typeof e.from&&(e.from=+e.from),"string"==typeof e.to&&(e.to=+e.to),"string"==typeof e.step&&(e.step=+e.step),"string"==typeof e.from_min&&(e.from_min=+e.from_min),"string"==typeof e.from_max&&(e.from_max=+e.from_max),"string"==typeof e.to_min&&(e.to_min=+e.to_min),"string"==typeof e.to_max&&(e.to_max=+e.to_max),"string"==typeof e.grid_num&&(e.grid_num=+e.grid_num),e.max<e.min&&(e.max=e.min),n)for(e.p_values=[],e.min=0,e.max=n-1,e.step=1,e.grid_num=e.max,e.grid_snap=!0,i=0;i<n;i++)t=+o[i],t=isNaN(t)?o[i]:(o[i]=t,this._prettify(t)),e.p_values.push(t);"number"==typeof e.from&&!isNaN(e.from)||(e.from=e.min),"number"==typeof e.to&&!isNaN(e.to)||(e.to=e.max),"single"===e.type?(e.from<e.min&&(e.from=e.min),e.from>e.max&&(e.from=e.max)):(e.from<e.min&&(e.from=e.min),e.from>e.max&&(e.from=e.max),e.to<e.min&&(e.to=e.min),e.to>e.max&&(e.to=e.max),this.update_check.from&&(this.update_check.from!==e.from&&e.from>e.to&&(e.from=e.to),this.update_check.to!==e.to&&e.to<e.from&&(e.to=e.from)),e.from>e.to&&(e.from=e.to),e.to<e.from&&(e.to=e.from)),("number"!=typeof e.step||isNaN(e.step)||!e.step||e.step<0)&&(e.step=1),"number"==typeof e.from_min&&e.from<e.from_min&&(e.from=e.from_min),"number"==typeof e.from_max&&e.from>e.from_max&&(e.from=e.from_max),"number"==typeof e.to_min&&e.to<e.to_min&&(e.to=e.to_min),"number"==typeof e.to_max&&e.from>e.to_max&&(e.to=e.to_max),s&&(s.min!==e.min&&(s.min=e.min),s.max!==e.max&&(s.max=e.max),(s.from<s.min||s.from>s.max)&&(s.from=e.from),(s.to<s.min||s.to>s.max)&&(s.to=e.to)),("number"!=typeof e.min_interval||isNaN(e.min_interval)||!e.min_interval||e.min_interval<0)&&(e.min_interval=0),("number"!=typeof e.max_interval||isNaN(e.max_interval)||!e.max_interval||e.max_interval<0)&&(e.max_interval=0),e.min_interval&&e.min_interval>e.max-e.min&&(e.min_interval=e.max-e.min),e.max_interval&&e.max_interval>e.max-e.min&&(e.max_interval=e.max-e.min)},decorate:function(t,i){var e="",s=this.options;return s.prefix&&(e+=s.prefix),e+=t,s.max_postfix&&(s.values.length&&t===s.p_values[s.max]?(e+=s.max_postfix,s.postfix&&(e+=" ")):i===s.max&&(e+=s.max_postfix,s.postfix&&(e+=" "))),s.postfix&&(e+=s.postfix),e},updateFrom:function(){this.result.from=this.options.from,this.result.from_percent=this.convertToPercent(this.result.from),this.result.from_pretty=this._prettify(this.result.from),this.options.values&&(this.result.from_value=this.options.values[this.result.from])},updateTo:function(){this.result.to=this.options.to,this.result.to_percent=this.convertToPercent(this.result.to),this.result.to_pretty=this._prettify(this.result.to),this.options.values&&(this.result.to_value=this.options.values[this.result.to])},updateResult:function(){this.result.min=this.options.min,this.result.max=this.options.max,this.updateFrom(),this.updateTo()},appendGrid:function(){if(this.options.grid){var t,i,e,s,o,n,r=this.options,a=r.max-r.min,h=r.grid_num,c=0,l=4,d="";for(this.calcGridMargin(),r.grid_snap&&(h=a/r.step),50<h&&(h=50),e=this.toFixed(100/h),4<h&&(l=3),7<h&&(l=2),14<h&&(l=1),28<h&&(l=0),t=0;t<h+1;t++){for(s=l,100<(c=this.toFixed(e*t))&&(c=100),o=((this.coords.big[t]=c)-e*(t-1))/(s+1),i=1;i<=s&&0!==c;i++)d+='<span class="irs-grid-pol small" style="left: '+this.toFixed(c-o*i)+'%"></span>';d+='<span class="irs-grid-pol" style="left: '+c+'%"></span>',n=this.convertToValue(c),d+='<span class="irs-grid-text js-grid-text-'+t+'" style="left: '+c+'%">'+(n=r.values.length?r.p_values[n]:this._prettify(n))+"</span>"}this.coords.big_num=Math.ceil(h+1),this.$cache.cont.addClass("irs-with-grid"),this.$cache.grid.html(d),this.cacheGridLabels()}},cacheGridLabels:function(){var t,i,e=this.coords.big_num;for(i=0;i<e;i++)t=this.$cache.grid.find(".js-grid-text-"+i),this.$cache.grid_labels.push(t);this.calcGridLabels()},calcGridLabels:function(){var t,i,e=[],s=[],o=this.coords.big_num;for(t=0;t<o;t++)this.coords.big_w[t]=this.$cache.grid_labels[t].outerWidth(!1),this.coords.big_p[t]=this.toFixed(this.coords.big_w[t]/this.coords.w_rs*100),this.coords.big_x[t]=this.toFixed(this.coords.big_p[t]/2),e[t]=this.toFixed(this.coords.big[t]-this.coords.big_x[t]),s[t]=this.toFixed(e[t]+this.coords.big_p[t]);for(this.options.force_edges&&(e[0]<-this.coords.grid_gap&&(e[0]=-this.coords.grid_gap,s[0]=this.toFixed(e[0]+this.coords.big_p[0]),this.coords.big_x[0]=this.coords.grid_gap),s[o-1]>100+this.coords.grid_gap&&(s[o-1]=100+this.coords.grid_gap,e[o-1]=this.toFixed(s[o-1]-this.coords.big_p[o-1]),this.coords.big_x[o-1]=this.toFixed(this.coords.big_p[o-1]-this.coords.grid_gap))),this.calcGridCollision(2,e,s),this.calcGridCollision(4,e,s),t=0;t<o;t++)i=this.$cache.grid_labels[t][0],this.coords.big_x[t]!==Number.POSITIVE_INFINITY&&(i.style.marginLeft=-this.coords.big_x[t]+"%")},calcGridCollision:function(t,i,e){var s,o,n,r=this.coords.big_num;for(s=0;s<r&&!(r<=(o=s+t/2));s+=t)n=this.$cache.grid_labels[o][0],e[s]<=i[o]?n.style.visibility="visible":n.style.visibility="hidden"},calcGridMargin:function(){this.options.grid_margin&&(this.coords.w_rs=this.$cache.rs.outerWidth(!1),this.coords.w_rs&&("single"===this.options.type?this.coords.w_handle=this.$cache.s_single.outerWidth(!1):this.coords.w_handle=this.$cache.s_from.outerWidth(!1),this.coords.p_handle=this.toFixed(this.coords.w_handle/this.coords.w_rs*100),this.coords.grid_gap=this.toFixed(this.coords.p_handle/2-.1),this.$cache.grid[0].style.width=this.toFixed(100-this.coords.p_handle)+"%",this.$cache.grid[0].style.left=this.coords.grid_gap+"%"))},update:function(t){this.input&&(this.is_update=!0,this.options.from=this.result.from,this.options.to=this.result.to,this.update_check.from=this.result.from,this.update_check.to=this.result.to,this.options=h.extend(this.options,t),this.validate(),this.updateResult(t),this.toggleInput(),this.remove(),this.init(!0))},reset:function(){this.input&&(this.updateResult(),this.update())},destroy:function(){this.input&&(this.toggleInput(),this.$cache.input.prop("readonly",!1),h.data(this.input,"ionRangeSlider",null),this.remove(),this.input=null,this.options=null)}},h.fn.ionRangeSlider=function(t){return this.each(function(){h.data(this,"ionRangeSlider")||h.data(this,"ionRangeSlider",new n(this,t,s++))})},function(){for(var n=0,t=["ms","moz","webkit","o"],i=0;i<t.length&&!l.requestAnimationFrame;++i)l.requestAnimationFrame=l[t[i]+"RequestAnimationFrame"],l.cancelAnimationFrame=l[t[i]+"CancelAnimationFrame"]||l[t[i]+"CancelRequestAnimationFrame"];l.requestAnimationFrame||(l.requestAnimationFrame=function(t,i){var e=(new Date).getTime(),s=Math.max(0,16-(e-n)),o=l.setTimeout(function(){t(e+s)},s);return n=e+s,o}),l.cancelAnimationFrame||(l.cancelAnimationFrame=function(t){clearTimeout(t)})}()}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(k){var s,t=navigator.userAgent,I=/iphone/i.test(t),o=/chrome/i.test(t),C=/android/i.test(t);k.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},autoclear:!0,dataName:"rawMaskFn",placeholder:"_"},k.fn.extend({caret:function(t,i){var e;if(0!==this.length&&!this.is(":hidden"))return"number"==typeof t?(i="number"==typeof i?i:t,this.each(function(){this.setSelectionRange?this.setSelectionRange(t,i):this.createTextRange&&((e=this.createTextRange()).collapse(!0),e.moveEnd("character",i),e.moveStart("character",t),e.select())})):(this[0].setSelectionRange?(t=this[0].selectionStart,i=this[0].selectionEnd):document.selection&&document.selection.createRange&&(e=document.selection.createRange(),t=0-e.duplicate().moveStart("character",-1e5),i=t+e.text.length),{begin:t,end:i})},unmask:function(){return this.trigger("unmask")},mask:function(i,g){var e,v,b,y,x,w,$;if(!i&&0<this.length){var t=k(this[0]).data(k.mask.dataName);return t?t():void 0}return g=k.extend({autoclear:k.mask.autoclear,placeholder:k.mask.placeholder,completed:null},g),e=k.mask.definitions,v=[],b=w=i.length,y=null,k.each(i.split(""),function(t,i){"?"==i?(w--,b=t):e[i]?(v.push(new RegExp(e[i])),null===y&&(y=v.length-1),t<b&&(x=v.length-1)):v.push(null)}),this.trigger("unmask").each(function(){function r(){if(g.completed){for(var t=y;t<=x;t++)if(v[t]&&f[t]===a(t))return;g.completed.call(p)}}function a(t){return g.placeholder.charAt(t<g.placeholder.length?t:0)}function h(t){for(;++t<w&&!v[t];);return t}function c(t,i){var e,s;if(!(t<0)){for(e=t,s=h(i);e<w;e++)if(v[e]){if(!(s<w&&v[e].test(f[s])))break;f[e]=f[s],f[s]=a(s),s=h(s)}d(),p.caret(Math.max(y,t))}}function n(){u(),p.val()!=m&&p.change()}function l(t,i){var e;for(e=t;e<i&&e<w;e++)v[e]&&(f[e]=a(e))}function d(){p.val(f.join(""))}function u(t){var i,e,s,o=p.val(),n=-1;for(s=i=0;i<w;i++)if(v[i]){for(f[i]=a(i);s++<o.length;)if(e=o.charAt(s-1),v[i].test(e)){f[i]=e,n=i;break}if(s>o.length){l(i+1,w);break}}else f[i]===o.charAt(s)&&s++,i<b&&(n=i);return t?d():n+1<b?g.autoclear||f.join("")===_?(p.val()&&p.val(""),l(0,w)):d():(d(),p.val(p.val().substring(0,n+1))),b?i:y}var p=k(this),f=k.map(i.split(""),function(t,i){return"?"!=t?e[t]?a(i):t:void 0}),_=f.join(""),m=p.val();p.data(k.mask.dataName,function(){return k.map(f,function(t,i){return v[i]&&t!=a(i)?t:null}).join("")}),p.one("unmask",function(){p.off(".mask").removeData(k.mask.dataName)}).on("focus.mask",function(){var t;p.prop("readonly")||(clearTimeout(s),m=p.val(),t=u(),s=setTimeout(function(){p.get(0)===document.activeElement&&(d(),t==i.replace("?","").length?p.caret(0,t):p.caret(t))},10))}).on("blur.mask",n).on("keydown.mask",function(t){if(!p.prop("readonly")){var i,e,s,o=t.which||t.keyCode;$=p.val(),8===o||46===o||I&&127===o?(e=(i=p.caret()).begin,(s=i.end)-e==0&&(e=46!==o?function(t){for(;0<=--t&&!v[t];);return t}(e):s=h(e-1),s=46===o?h(s):s),l(e,s),c(e,s-1),t.preventDefault()):13===o?n.call(this,t):27===o&&(p.val(m),p.caret(0,u()),t.preventDefault())}}).on("keypress.mask",function(t){if(!p.prop("readonly")){var i,e,s,o=t.which||t.keyCode,n=p.caret();if(!(t.ctrlKey||t.altKey||t.metaKey||o<32)&&o&&13!==o){if(n.end-n.begin!=0&&(l(n.begin,n.end),c(n.begin,n.end-1)),(i=h(n.begin-1))<w&&(e=String.fromCharCode(o),v[i].test(e))){if(function(t){var i,e,s,o;for(e=a(i=t);i<w;i++)if(v[i]){if(s=h(i),o=f[i],f[i]=e,!(s<w&&v[s].test(o)))break;e=o}}(i),f[i]=e,d(),s=h(i),C){setTimeout(function(){k.proxy(k.fn.caret,p,s)()},0)}else p.caret(s);n.begin<=x&&r()}t.preventDefault()}}}).on("input.mask paste.mask",function(){p.prop("readonly")||setTimeout(function(){var t=u(!0);p.caret(t),r()},0)}),o&&C&&p.off("input.mask").on("input.mask",function(){var t=p.val(),i=p.caret();if($&&$.length&&$.length>t.length){for(u(!0);0<i.begin&&!v[i.begin-1];)i.begin--;if(0===i.begin)for(;i.begin<y&&!v[i.begin];)i.begin++;p.caret(i.begin,i.begin)}else{for(u(!0);i.begin<w&&!v[i.begin];)i.begin++;p.caret(i.begin,i.begin)}r()}),u()})}})}),function(n){n.fn.niceSelect=function(t){function s(t){t.after(n("<div></div>").addClass("nice-select").addClass(t.attr("class")||"").addClass(t.attr("disabled")?"disabled":"").attr("tabindex",t.attr("disabled")?null:"0").html('<span class="current"></span><ul class="list"></ul>'));var s=t.next(),i=t.find("option"),e=t.find("option:selected");s.find(".current").html(e.data("display")||e.text()),i.each(function(t){var i=n(this),e=i.data("display");s.find("ul").append(n("<li></li>").attr("data-value",i.val()).attr("data-display",e||null).addClass("option"+(i.is(":selected")?" selected":"")+(i.is(":disabled")?" disabled":"")).html(i.text()))})}if("string"==typeof t)return"update"==t?this.each(function(){var t=n(this),i=n(this).next(".nice-select"),e=i.hasClass("open");i.length&&(i.remove(),s(t),e&&t.next().trigger("click"))}):"destroy"==t?(this.each(function(){var t=n(this),i=n(this).next(".nice-select");i.length&&(i.remove(),t.css("display",""))}),0==n(".nice-select").length&&n(document).off(".nice_select")):console.log('Method "'+t+'" does not exist.'),this;this.hide(),this.each(function(){var t=n(this);t.next().hasClass("nice-select")||s(t)}),n(document).off(".nice_select"),n(document).on("click.nice_select",".nice-select",function(t){var i=n(this);n(".nice-select").not(i).removeClass("open"),i.toggleClass("open"),i.hasClass("open")?(i.find(".option"),i.find(".focus").removeClass("focus"),i.find(".selected").addClass("focus")):i.focus()}),n(document).on("click.nice_select",function(t){0===n(t.target).closest(".nice-select").length&&n(".nice-select").removeClass("open").find(".option")}),n(document).on("click.nice_select",".nice-select .option:not(.disabled)",function(t){var i=n(this),e=i.closest(".nice-select");e.find(".selected").removeClass("selected"),i.addClass("selected");var s=i.data("display")||i.text();e.find(".current").text(s),e.prev("select").val(i.data("value")).trigger("change")}),n(document).on("keydown.nice_select",".nice-select",function(t){var i=n(this),e=n(i.find(".focus")||i.find(".list .option.selected"));if(32==t.keyCode||13==t.keyCode)return i.hasClass("open")?e.trigger("click"):i.trigger("click"),!1;if(40==t.keyCode){if(i.hasClass("open")){var s=e.nextAll(".option:not(.disabled)").first();0<s.length&&(i.find(".focus").removeClass("focus"),s.addClass("focus"))}else i.trigger("click");return!1}if(38==t.keyCode){if(i.hasClass("open")){var o=e.prevAll(".option:not(.disabled)").first();0<o.length&&(i.find(".focus").removeClass("focus"),o.addClass("focus"))}else i.trigger("click");return!1}if(27==t.keyCode)i.hasClass("open")&&i.trigger("click");else if(9==t.keyCode&&i.hasClass("open"))return!1});var i=document.createElement("a").style;return i.cssText="pointer-events:auto","auto"!==i.pointerEvents&&n("html").addClass("no-csspointerevents"),this}}(jQuery),function(t,i){"function"==typeof define&&define.amd?define(["jquery"],i):"object"==typeof exports?module.exports=i(require("jquery")):t.lightbox=i(t.jQuery)}(this,function(d){function t(t){this.album=[],this.currentImageIndex=void 0,this.init(),this.options=d.extend({},this.constructor.defaults),this.option(t)}return t.defaults={albumLabel:"Фото %1 из %2",alwaysShowNavOnTouchDevices:!1,fadeDuration:600,fitImagesInViewport:!0,imageFadeDuration:600,positionFromTop:50,resizeDuration:700,showImageNumberLabel:!0,wrapAround:!1,disableScrolling:!1,sanitizeTitle:!1},t.prototype.option=function(t){d.extend(this.options,t)},t.prototype.imageCountLabel=function(t,i){return this.options.albumLabel.replace(/%1/g,t).replace(/%2/g,i)},t.prototype.init=function(){var t=this;d(document).ready(function(){t.enable(),t.build()})},t.prototype.enable=function(){var i=this;d("body").on("click","a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox]",function(t){return i.start(d(t.currentTarget)),!1})},t.prototype.build=function(){if(!(0<d("#lightbox").length)){var i=this;d('<div id="lightboxOverlay" class="lightboxOverlay"></div><div id="lightbox" class="lightbox"><div class="lb-outerContainer"><div class="lb-container"><img class="lb-image" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" /><div class="lb-nav"><a class="lb-prev" href="" ></a><a class="lb-next" href="" ></a></div><div class="lb-loader"><a class="lb-cancel"></a></div></div></div><div class="lb-dataContainer"><div class="lb-data"><div class="lb-details"><span class="lb-caption"></span><span class="lb-number"></span></div><div class="lb-closeContainer"><a class="lb-close"></a></div></div></div></div>').appendTo(d("body")),this.$lightbox=d("#lightbox"),this.$overlay=d("#lightboxOverlay"),this.$outerContainer=this.$lightbox.find(".lb-outerContainer"),this.$container=this.$lightbox.find(".lb-container"),this.$image=this.$lightbox.find(".lb-image"),this.$nav=this.$lightbox.find(".lb-nav"),this.containerPadding={top:parseInt(this.$container.css("padding-top"),10),right:parseInt(this.$container.css("padding-right"),10),bottom:parseInt(this.$container.css("padding-bottom"),10),left:parseInt(this.$container.css("padding-left"),10)},this.imageBorderWidth={top:parseInt(this.$image.css("border-top-width"),10),right:parseInt(this.$image.css("border-right-width"),10),bottom:parseInt(this.$image.css("border-bottom-width"),10),left:parseInt(this.$image.css("border-left-width"),10)},this.$overlay.hide().on("click",function(){return i.end(),!1}),this.$lightbox.hide().on("click",function(t){return"lightbox"===d(t.target).attr("id")&&i.end(),!1}),this.$outerContainer.on("click",function(t){return"lightbox"===d(t.target).attr("id")&&i.end(),!1}),this.$lightbox.find(".lb-prev").on("click",function(){return 0===i.currentImageIndex?i.changeImage(i.album.length-1):i.changeImage(i.currentImageIndex-1),!1}),this.$lightbox.find(".lb-next").on("click",function(){return i.currentImageIndex===i.album.length-1?i.changeImage(0):i.changeImage(i.currentImageIndex+1),!1}),this.$nav.on("mousedown",function(t){3===t.which&&(i.$nav.css("pointer-events","none"),i.$lightbox.one("contextmenu",function(){setTimeout(function(){this.$nav.css("pointer-events","auto")}.bind(i),0)}))}),this.$lightbox.find(".lb-loader, .lb-close").on("click",function(){return i.end(),!1})}},t.prototype.start=function(t){function i(t){e.album.push({alt:t.attr("data-alt"),link:t.attr("href"),title:t.attr("data-title")||t.attr("title")})}var e=this,s=d(window);s.on("resize",d.proxy(this.sizeOverlay,this)),d("select, object, embed").css({visibility:"hidden"}),this.sizeOverlay(),this.album=[];var o,n=0,r=t.attr("data-lightbox");if(r){o=d(t.prop("tagName")+'[data-lightbox="'+r+'"]');for(var a=0;a<o.length;a=++a)i(d(o[a])),o[a]===t[0]&&(n=a)}else if("lightbox"===t.attr("rel"))i(t);else{o=d(t.prop("tagName")+'[rel="'+t.attr("rel")+'"]');for(var h=0;h<o.length;h=++h)i(d(o[h])),o[h]===t[0]&&(n=h)}var c=s.scrollTop()+this.options.positionFromTop,l=s.scrollLeft();this.$lightbox.css({top:c+"px",left:l+"px"}).fadeIn(this.options.fadeDuration),this.options.disableScrolling&&d("html").addClass("lb-disable-scrolling"),this.changeImage(n)},t.prototype.changeImage=function(r){var a=this;this.disableKeyboardNav();var h=this.$lightbox.find(".lb-image");this.$overlay.fadeIn(this.options.fadeDuration),d(".lb-loader").fadeIn("slow"),this.$lightbox.find(".lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption").hide(),this.$outerContainer.addClass("animating");var c=new Image;c.onload=function(){var t,i,e,s,o,n;h.attr({alt:a.album[r].alt,src:a.album[r].link}),d(c),h.width(c.width),h.height(c.height),a.options.fitImagesInViewport&&(n=d(window).width(),o=d(window).height(),s=n-a.containerPadding.left-a.containerPadding.right-a.imageBorderWidth.left-a.imageBorderWidth.right-20,e=o-a.containerPadding.top-a.containerPadding.bottom-a.imageBorderWidth.top-a.imageBorderWidth.bottom-120,a.options.maxWidth&&a.options.maxWidth<s&&(s=a.options.maxWidth),a.options.maxHeight&&a.options.maxHeight<s&&(e=a.options.maxHeight),(c.width>s||c.height>e)&&(c.width/s>c.height/e?(i=s,t=parseInt(c.height/(c.width/i),10)):(t=e,i=parseInt(c.width/(c.height/t),10)),h.width(i),h.height(t))),a.sizeContainer(h.width(),h.height())},c.src=this.album[r].link,this.currentImageIndex=r},t.prototype.sizeOverlay=function(){this.$overlay.width(d(document).width()).height(d(document).height())},t.prototype.sizeContainer=function(t,i){function e(){s.$lightbox.find(".lb-dataContainer").width(r),s.$lightbox.find(".lb-prevLink").height(a),s.$lightbox.find(".lb-nextLink").height(a),s.showImage()}var s=this,o=this.$outerContainer.outerWidth(),n=this.$outerContainer.outerHeight(),r=t+this.containerPadding.left+this.containerPadding.right+this.imageBorderWidth.left+this.imageBorderWidth.right,a=i+this.containerPadding.top+this.containerPadding.bottom+this.imageBorderWidth.top+this.imageBorderWidth.bottom;o!==r||n!==a?this.$outerContainer.animate({width:r,height:a},this.options.resizeDuration,"swing",function(){e()}):e()},t.prototype.showImage=function(){this.$lightbox.find(".lb-loader").stop(!0).hide(),this.$lightbox.find(".lb-image").fadeIn(this.options.imageFadeDuration),this.updateNav(),this.updateDetails(),this.preloadNeighboringImages(),this.enableKeyboardNav()},t.prototype.updateNav=function(){var t=!1;try{document.createEvent("TouchEvent"),t=!!this.options.alwaysShowNavOnTouchDevices}catch(t){}this.$lightbox.find(".lb-nav").show(),1<this.album.length&&(this.options.wrapAround?(t&&this.$lightbox.find(".lb-prev, .lb-next").css("opacity","1"),this.$lightbox.find(".lb-prev, .lb-next").show()):(0<this.currentImageIndex&&(this.$lightbox.find(".lb-prev").show(),t&&this.$lightbox.find(".lb-prev").css("opacity","1")),this.currentImageIndex<this.album.length-1&&(this.$lightbox.find(".lb-next").show(),t&&this.$lightbox.find(".lb-next").css("opacity","1"))))},t.prototype.updateDetails=function(){var t=this;if(void 0!==this.album[this.currentImageIndex].title&&""!==this.album[this.currentImageIndex].title){var i=this.$lightbox.find(".lb-caption");this.options.sanitizeTitle?i.text(this.album[this.currentImageIndex].title):i.html(this.album[this.currentImageIndex].title),i.fadeIn("fast").find("a").on("click",function(t){void 0!==d(this).attr("target")?window.open(d(this).attr("href"),d(this).attr("target")):location.href=d(this).attr("href")})}if(1<this.album.length&&this.options.showImageNumberLabel){var e=this.imageCountLabel(this.currentImageIndex+1,this.album.length);this.$lightbox.find(".lb-number").text(e).fadeIn("fast")}else this.$lightbox.find(".lb-number").hide();this.$outerContainer.removeClass("animating"),this.$lightbox.find(".lb-dataContainer").fadeIn(this.options.resizeDuration,function(){return t.sizeOverlay()})},t.prototype.preloadNeighboringImages=function(){this.album.length>this.currentImageIndex+1&&((new Image).src=this.album[this.currentImageIndex+1].link),0<this.currentImageIndex&&((new Image).src=this.album[this.currentImageIndex-1].link)},t.prototype.enableKeyboardNav=function(){d(document).on("keyup.keyboard",d.proxy(this.keyboardAction,this))},t.prototype.disableKeyboardNav=function(){d(document).off(".keyboard")},t.prototype.keyboardAction=function(t){var i=t.keyCode,e=String.fromCharCode(i).toLowerCase();27===i||e.match(/x|o|c/)?this.end():"p"===e||37===i?0!==this.currentImageIndex?this.changeImage(this.currentImageIndex-1):this.options.wrapAround&&1<this.album.length&&this.changeImage(this.album.length-1):"n"!==e&&39!==i||(this.currentImageIndex!==this.album.length-1?this.changeImage(this.currentImageIndex+1):this.options.wrapAround&&1<this.album.length&&this.changeImage(0))},t.prototype.end=function(){this.disableKeyboardNav(),d(window).off("resize",this.sizeOverlay),this.$lightbox.fadeOut(this.options.fadeDuration),this.$overlay.fadeOut(this.options.fadeDuration),d("select, object, embed").css({visibility:"visible"}),this.options.disableScrolling&&d("html").removeClass("lb-disable-scrolling")},new t});